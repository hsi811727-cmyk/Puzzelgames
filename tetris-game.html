<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üß© Tetris Classic</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        body {
            background: #1a2e3f;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        .game-container {
            width: min(98vw, 400px);
            background: #2c3e50;
            border-radius: 30px;
            padding: 20px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            color: white;
            margin-bottom: 20px;
            background: #1e2b38;
            padding: 15px;
            border-radius: 40px;
        }
        canvas {
            width: 100%;
            aspect-ratio: 1/2;
            background: #1e2b38;
            border-radius: 20px;
            display: block;
            margin-bottom: 20px;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        .control-btn {
            background: #34495e;
            color: white;
            border: none;
            border-radius: 30px;
            padding: 15px;
            font-size: 1.2rem;
            cursor: pointer;
        }
        .restart-btn {
            background: #e67e22;
            color: white;
            border: none;
            border-radius: 40px;
            padding: 15px;
            font-size: 1.2rem;
            width: 100%;
            cursor: pointer;
        }
        .score {
            color: #f1c40f;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
<div class="game-container">
    <div class="header">
        <span>üß© TETRIS</span>
        <span class="score" id="score">0</span>
    </div>
    <canvas id="gameCanvas" width="200" height="400"></canvas>
    <div class="controls">
        <button class="control-btn" id="leftBtn">‚Üê</button>
        <button class="control-btn" id="rotateBtn">‚Üª</button>
        <button class="control-btn" id="rightBtn">‚Üí</button>
        <button class="control-btn" id="downBtn">‚Üì</button>
    </div>
    <button class="restart-btn" id="restartBtn">‚ü≤ NEW GAME</button>
</div>
<script>
(function() {
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    const COLS = 10;
    const ROWS = 20;
    const BLOCK_SIZE = 20;
    
    const SHAPES = [
        [[1,1,1,1]], // I
        [[1,1],[1,1]], // O
        [[0,1,0],[1,1,1]], // T
        [[1,0,0],[1,1,1]], // L
        [[0,0,1],[1,1,1]], // J
        [[0,1,1],[1,1,0]], // S
        [[1,1,0],[0,1,1]] // Z
    ];
    
    const COLORS = ['#00f0f0', '#f0f000', '#a000f0', '#f0a000', '#0000f0', '#00f000', '#f00000'];
    
    let board = [];
    for(let r=0; r<ROWS; r++) {
        board[r] = [];
        for(let c=0; c<COLS; c++) board[r][c] = 0;
    }
    
    let currentPiece = {
        shape: SHAPES[0],
        color: 0,
        x: 3,
        y: 0
    };
    
    let score = 0;
    let gameOver = false;
    let gameInterval;
    
    function newPiece() {
        let type = Math.floor(Math.random() * SHAPES.length);
        currentPiece = {
            shape: SHAPES[type],
            color: type,
            x: Math.floor((COLS - SHAPES[type][0].length) / 2),
            y: 0
        };
        
        if(collision()) {
            gameOver = true;
        }
    }
    
    function collision() {
        for(let r=0; r<currentPiece.shape.length; r++) {
            for(let c=0; c<currentPiece.shape[0].length; c++) {
                if(currentPiece.shape[r][c]) {
                    let boardX = currentPiece.x + c;
                    let boardY = currentPiece.y + r;
                    if(boardX < 0 || boardX >= COLS || boardY >= ROWS || boardY < 0) return true;
                    if(boardY >= 0 && board[boardY][boardX] !== 0) return true;
                }
            }
        }
        return false;
    }
    
    function mergePiece() {
        for(let r=0; r<currentPiece.shape.length; r++) {
            for(let c=0; c<currentPiece.shape[0].length; c++) {
                if(currentPiece.shape[r][c]) {
                    let boardY = currentPiece.y + r;
                    let boardX = currentPiece.x + c;
                    if(boardY >= 0) board[boardY][boardX] = currentPiece.color + 1;
                }
            }
        }
        
        // Clear lines
        for(let r=ROWS-1; r>=0; r--) {
            let full = true;
            for(let c=0; c<COLS; c++) {
                if(board[r][c] === 0) full = false;
            }
            if(full) {
                for(let r2=r; r2>0; r2--) {
                    for(let c=0; c<COLS; c++) {
                        board[r2][c] = board[r2-1][c];
                    }
                }
                for(let c=0; c<COLS; c++) board[0][c] = 0;
                score += 100;
                document.getElementById('score').innerText = score;
                r++;
            }
        }
        
        newPiece();
    }
    
    function move(dx, dy) {
        currentPiece.x += dx;
        currentPiece.y += dy;
        if(collision()) {
            currentPiece.x -= dx;
            currentPiece.y -= dy;
            if(dy === 1) mergePiece();
        }
    }
    
    function rotate() {
        let rotated = [];
        for(let c=0; c<currentPiece.shape[0].length; c++) {
            rotated[c] = [];
            for(let r=currentPiece.shape.length-1; r>=0; r--) {
                rotated[c].push(currentPiece.shape[r][c]);
            }
        }
        let oldShape = currentPiece.shape;
        currentPiece.shape = rotated;
        if(collision()) currentPiece.shape = oldShape;
    }
    
    function draw() {
        ctx.fillStyle = '#1e2b38';
        ctx.fillRect(0, 0, 200, 400);
        
        for(let r=0; r<ROWS; r++) {
            for(let c=0; c<COLS; c++) {
                if(board[r][c] !== 0) {
                    ctx.fillStyle = COLORS[board[r][c]-1];
                    ctx.fillRect(c*BLOCK_SIZE, r*BLOCK_SIZE, BLOCK_SIZE-1, BLOCK_SIZE-1);
                }
            }
        }
        
        for(let r=0; r<currentPiece.shape.length; r++) {
            for(let c=0; c<currentPiece.shape[0].length; c++) {
                if(currentPiece.shape[r][c]) {
                    ctx.fillStyle = COLORS[currentPiece.color];
                    ctx.fillRect((currentPiece.x + c)*BLOCK_SIZE, (currentPiece.y + r)*BLOCK_SIZE, BLOCK_SIZE-1, BLOCK_SIZE-1);
                }
            }
        }
        
        if(gameOver) {
            ctx.fillStyle = 'rgba(0,0,0,0.7)';
            ctx.fillRect(0, 0, 200, 400);
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER', 100, 200);
        }
    }
    
    function gameTick() {
        if(!gameOver) {
            move(0, 1);
            draw();
        }
    }
    
    document.getElementById('leftBtn').onclick = () => move(-1, 0);
    document.getElementById('rightBtn').onclick = () => move(1, 0);
    document.getElementById('downBtn').onclick = () => move(0, 1);
    document.getElementById('rotateBtn').onclick = rotate;
    document.getElementById('restartBtn').onclick = () => {
        board = [];
        for(let r=0; r<ROWS; r++) {
            board[r] = [];
            for(let c=0; c<COLS; c++) board[r][c] = 0;
        }
        score = 0;
        gameOver = false;
        document.getElementById('score').innerText = '0';
        newPiece();
    };
    
    document.addEventListener('keydown', (e) => {
        if(e.key === 'ArrowLeft') move(-1, 0);
        if(e.key === 'ArrowRight') move(1, 0);
        if(e.key === 'ArrowDown') move(0, 1);
        if(e.key === 'ArrowUp') rotate();
    });
    
    newPiece();
    setInterval(gameTick, 500);
    draw();
})();
</script>
</body>
</html>